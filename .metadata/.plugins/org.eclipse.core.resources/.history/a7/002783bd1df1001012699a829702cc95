package com.AuthService.Service;

import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.stereotype.Service;

import com.AuthService.DTO.AuthDTO;
import com.AuthService.DTO.UserResponse;
import com.AuthService.Entity.UserAuth;
import com.AuthService.Repository.AuthRepository;
@Service
public class AuthService {
	private final BCryptPasswordEncoder passwordEncoder;
	private final AuthRepository repository;
    private final UserClient client;
    public AuthService(BCryptPasswordEncoder passwordEncoder,AuthRepository repository,UserClient client) {
        this.passwordEncoder = passwordEncoder;
        this.repository=repository;
        this.client=client;
    }
	public void add(AuthDTO request) {
		UserResponse user=new UserResponse();
        user.setFullName(request.getFullName());
        user.setAddress(request.getAddress());
        user.setEmail(request.getEmail());
        client.AddUser(user);
        UserAuth auth=new UserAuth();
		auth.setEmail(request.getEmail());
		String encodedPassword = passwordEncoder.encode(request.getPassword());
        auth.setPassword(encodedPassword);
        repository.save(auth);
	}
	public boolean validateUser(String email, String password) {
		// TODO Auto-generated method stub
		return false;
	}
}
